plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.4.16'
}

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile group: 'org.yaml', name: 'snakeyaml', version: '1.26'
}

// See https://github.com/JetBrains/gradle-intellij-plugin#intellij-platform-properties
intellij {
    /*
    // Config for Android Studio v3.5
    version '2019.1.4'
    plugins 'Dart:191.8593', 'io.flutter:43.0.1'
    */

    // Config for Android Studio v3.6
    version '2019.2.4'
    plugins 'Dart:192.7761', 'io.flutter:43.0.2'

    /*
    * Use this property if you want to test your plugin in any non-IDEA JetBrains IDE such as WebStorm or Android Studio.
    *
    * See https://github.com/JetBrains/gradle-intellij-plugin#rundebug-ide-properties
    * */
    //alternativeIdePath '/Applications/Android Studio.app'
}

// See https://github.com/JetBrains/gradle-intellij-plugin#patching-dsl
patchPluginXml {
    // 设置插件的版本号
    version = '0.2.1'

    // 设置插件描述
    pluginDescription = """
<p>Flr (Flutter-R): A Flutter Resource Manager Android Studio Plugin, which can help flutter developer to auto specify assets in pubspec.yaml and generate r.g.dart file.</p>
<br>
<p>You can get more details from:</p>
<ul>
  <li><a href="https://github.com/Fly-Mix/flr-as-plugin">Flr GitHub Repository</a></li>
  <li><a href="https://plugins.jetbrains.com/plugin/13789-flr/">Flr Plugin Homepage</a></li>
</ul>
    """

    /*
    * 插件兼容IDEA的最小版本号和最大版本号
    * 详细可参考：
    * - https://github.com/JetBrains/gradle-intellij-plugin#patching-dsl
    * - http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/build_number_ranges.html
    * */
    //sinceBuild = '192'
    //untilBuild = '192.*'

    /*
    * 设置版本更新日志
    * 注意：最新版本号的标题样式改为h2，其他版本号的标题样式改为h3
    */
    changeNotes = """
<h2>0.2.1</h2>
<ul>
  <li>fix issue#1</li>
  <li>optimize the processing logic for r_dart_library</li>
</ul>
<h3>0.2.0</h3>
<ul>
  <li>support Android Studio v3.6</li>
</ul>
    """
}